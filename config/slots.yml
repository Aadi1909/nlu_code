
version: "1.0"

slots:

  
  vehicle_id:
    type: "text"
    entity: "vehicle_id"
    
    prompts:
      en: "Could you please tell me your vehicle number?"
      hi: "कृपया अपना वाहन नंबर बताएं?"
      hinglish: "Apna vehicle number bata dijiye?"
    
    reprompts:
      en: "I didn't catch that. Your vehicle number should be like DL01AB1234. What is it?"
      hi: "समझ नहीं आया। आपका वाहन नंबर जैसे DL01AB1234 होना चाहिए। क्या है आपका?"
      hinglish: "Samajh nahi aaya. Vehicle number jaise DL01AB1234 hona chahiye. Kya hai aapka?"
    
    validation:
      pattern: "[A-Z]{2}[0-9]{2}[A-Z]{1,2}[0-9]{4}"
      error_message:
        en: "That doesn't seem like a valid vehicle number. Please try again."
        hi: "यह सही वाहन नंबर नहीं लग रहा। कृपया फिर से बताएं।"
        hinglish: "Yeh sahi vehicle number nahi lag raha. Please phir se batayein."
    
    max_attempts: 3
    on_max_attempts: "TRANSFER_TO_AGENT"

  driver_id:
    type: "text"
    entity: "driver_id"
    auto_fill: true
    
    auto_fill_sources:
      - source: "phone_lookup"
        field: "caller_phone"
      - source: "session"
        field: "authenticated_driver_id"
    
    prompts:
      en: "I couldn't identify your account. Could you confirm your registered phone number?"
      hi: "आपका अकाउंट नहीं मिला। कृपया अपना रजिस्टर्ड फोन नंबर बताएं?"
      hinglish: "Aapka account nahi mila. Registered phone number confirm karein?"
    
    max_attempts: 2
    on_max_attempts: "TRANSFER_TO_AGENT"

  battery_id:
    type: "text"
    entity: "battery_id"
    required: false
    
    prompts:
      en: "Do you know your battery ID? It should be on the battery label."
      hi: "क्या आपको अपनी बैटरी ID पता है? यह बैटरी पर लिखी होती है।"
      hinglish: "Aapko battery ID pata hai? Battery par likhi hoti hai."

  station_id:
    type: "text"
    entity: "station_id"
    required: false
    
    auto_fill_sources:
      - source: "context"
        field: "last_mentioned_station"
      - source: "gps_nearest"
        field: "nearest_station_id"
  
  location:
    type: "text"
    entity: "location"
    
    prompts:
      en: "Which location should I search near?"
      hi: "किस जगह के पास ढूंढना है?"
      hinglish: "Kahan ke paas dhundhna hai?"
    
    auto_fill_sources:
      - source: "gps"
        field: "current_location"
        prompt_if_unavailable: true

  city:
    type: "text"
    entity: "city"
    
    prompts:
      en: "Which city are you in?"
      hi: "आप किस शहर में हैं?"
      hinglish: "Aap kis city mein hain?"
    
    auto_fill_sources:
      - source: "gps"
        field: "detected_city"
      - source: "profile"
        field: "registered_city"
  
  date_range:
    type: "temporal"
    entity: "date_range"
    
    default_value: "today"
    
    prompts:
      en: "For which time period? Today, yesterday, or this week?"
      hi: "किस समय के लिए? आज, कल, या इस हफ्ते?"
      hinglish: "Kis time period ke liye? Aaj, kal, ya is week?"
    
    options:
      - value: "today"
        labels: ["today", "aaj", "आज"]
      - value: "yesterday"
        labels: ["yesterday", "kal", "कल"]
      - value: "this_week"
        labels: ["this week", "is hafte", "इस हफ्ते"]
      - value: "this_month"
        labels: ["this month", "is mahine", "इस महीने"]
---
  
  amount:
    type: "numeric"
    entity: "amount"
    
    validation:
      min: 1
      max: 100000
    
    prompts:
      en: "How much amount?"
      hi: "कितनी राशि?"
      hinglish: "Kitna amount?"

  limit:
    type: "numeric"
    entity: "count"
    
    default_value: 5
    
    validation:
      min: 1
      max: 50

  
  plan_type:
    type: "categorical"
    entity: "plan_type"
    
    options:
      - value: "basic"
        labels: ["basic", "बेसिक", "simple"]
      - value: "standard"
        labels: ["standard", "स्टैंडर्ड", "normal"]
      - value: "premium"
        labels: ["premium", "प्रीमियम", "best"]
      - value: "unlimited"
        labels: ["unlimited", "अनलिमिटेड"]
    
    prompts:
      en: "Which plan type - Basic, Standard, Premium, or Unlimited?"
      hi: "कौन सा प्लान - बेसिक, स्टैंडर्ड, प्रीमियम, या अनलिमिटेड?"
      hinglish: "Konsa plan chahiye - Basic, Standard, Premium, ya Unlimited?"

  payment_method:
    type: "categorical"
    entity: "payment_method"
    
    options:
      - value: "upi"
        labels: ["upi", "phonepe", "gpay", "paytm"]
      - value: "card"
        labels: ["card", "credit card", "debit card"]
      - value: "netbanking"
        labels: ["netbanking", "bank transfer"]
    
    prompts:
      en: "How would you like to pay - UPI, Card, or Net Banking?"
      hi: "पेमेंट कैसे करना है - UPI, कार्ड, या नेट बैंकिंग?"
      hinglish: "Payment kaise karna hai - UPI, Card, ya Net Banking?"

  issue_type:
    type: "categorical"
    entity: "issue_type"
    
    options:
      - value: "battery_issue"
        labels: ["battery", "बैटरी", "charge"]
      - value: "payment_issue"
        labels: ["payment", "पेमेंट", "bill", "paise"]
      - value: "station_issue"
        labels: ["station", "स्टेशन", "swap point"]
      - value: "app_issue"
        labels: ["app", "एप्प", "application"]
      - value: "other"
        labels: ["other", "अन्य", "something else"]
    
    prompts:
      en: "What type of issue - Battery, Payment, Station, App, or Other?"
      hi: "किस प्रकार की समस्या - बैटरी, पेमेंट, स्टेशन, एप्प, या अन्य?"
      hinglish: "Kaunsi problem hai - Battery, Payment, Station, App, ya kuch aur?"

  
  confirmation:
    type: "boolean"
    
    affirmative:
      - "yes"
      - "yeah"
      - "haan"
      - "ha"
      - "हाँ"
      - "जी"
      - "correct"
      - "sahi"
      - "theek hai"
      - "ठीक है"
    
    negative:
      - "no"
      - "nahi"
      - "नहीं"
      - "na"
      - "wrong"
      - "galat"
      - "गलत"
    
    prompts:
      en: "Is that correct?"
      hi: "क्या यह सही है?"
      hinglish: "Kya yeh sahi hai?"

intent_slot_mapping:

  check_battery_status:
    required:
      - vehicle_id
    optional:
      - battery_id
    filling_order:
      - vehicle_id
      - battery_id

  find_swap_station:
    required: []
    optional:
      - location
      - city
    auto_fill:
      - slot: location
        from: gps
    filling_order:
      - location
      - city

  check_subscription:
    required:
      - driver_id
    optional: []
    auto_fill:
      - slot: driver_id
        from: phone_lookup

  payment_inquiry:
    required:
      - driver_id
    optional:
      - date_range
    auto_fill:
      - slot: driver_id
        from: phone_lookup
      - slot: date_range
        default: today

  swap_history:
    required:
      - driver_id
    optional:
      - date_range
      - limit
    auto_fill:
      - slot: driver_id
        from: phone_lookup
      - slot: limit
        default: 5

  make_payment:
    required:
      - driver_id
      - confirmation
    optional:
      - amount
      - payment_method
    filling_order:
      - driver_id
      - amount
      - payment_method
      - confirmation

  report_issue:
    required:
      - driver_id
      - issue_type
    optional: []
    filling_order:
      - driver_id
      - issue_type

  # New slot mappings for onboarding intents
  driver_onboarding:
    required: []
    optional:
      - phone_number
      - driver_name
    filling_order:
      - phone_number
      - driver_name

  onboarding_status:
    required:
      - driver_id
    optional: []
    auto_fill:
      - slot: driver_id
        from: phone_lookup

  verification_status:
    required:
      - driver_id
    optional:
      - verification_type
    auto_fill:
      - slot: driver_id
        from: phone_lookup
    filling_order:
      - driver_id
      - verification_type

  retrofitment_schedule:
    required:
      - driver_id
      - vehicle_id
    optional:
      - preferred_date
      - preferred_time
    auto_fill:
      - slot: driver_id
        from: phone_lookup
    filling_order:
      - driver_id
      - vehicle_id
      - preferred_date
      - preferred_time

  retrofitment_status:
    required:
      - driver_id
      - vehicle_id
    optional: []
    auto_fill:
      - slot: driver_id
        from: phone_lookup

  dsk_onboard:
    required:
      - driver_id
    optional:
      - dsk_location
      - leave_start_date
      - leave_end_date
    auto_fill:
      - slot: driver_id
        from: phone_lookup
    filling_order:
      - driver_id
      - leave_start_date
      - leave_end_date
      - dsk_location

  dsk_deboard:
    required:
      - driver_id
    optional:
      - dsk_location
    auto_fill:
      - slot: driver_id
        from: phone_lookup
    filling_order:
      - driver_id
      - dsk_location

  driver_deactivate:
    required:
      - driver_id
    optional:
      - deactivation_center
      - leave_duration
    auto_fill:
      - slot: driver_id
        from: phone_lookup
    filling_order:
      - driver_id
      - deactivation_center
      - leave_duration

  driver_activate:
    required:
      - driver_id
    optional:
      - activation_center
    auto_fill:
      - slot: driver_id
        from: phone_lookup
    filling_order:
      - driver_id
      - activation_center

  ic_battery_submit:
    required:
      - driver_id
      - battery_id
    optional:
      - ic_location
    auto_fill:
      - slot: driver_id
        from: phone_lookup
    filling_order:
      - driver_id
      - battery_id
      - ic_location

# New slot definitions
slots_extended:
  phone_number:
    type: "text"
    entity: "phone_number"
    
    prompts:
      en: "Please provide your mobile number"
      hi: "कृपया अपना मोबाइल नंबर दें"
      hinglish: "Apna mobile number dijiye"
    
    validation:
      pattern: "[6-9]\\d{9}"
      error_message:
        en: "Please provide a valid 10-digit mobile number"
        hi: "कृपया सही 10 अंकों का मोबाइल नंबर दें"
        hinglish: "Sahi 10 digit mobile number dijiye"

  driver_name:
    type: "text"
    entity: "driver_name"
    
    prompts:
      en: "What is your name?"
      hi: "आपका नाम क्या है?"
      hinglish: "Aapka naam kya hai?"

  verification_type:
    type: "categorical"
    entity: "verification_type"
    
    options:
      - value: "basic_info"
        labels: ["basic info", "basic", "बेसिक", "personal info"]
      - value: "location"
        labels: ["location", "लोकेशन", "address location"]
      - value: "address"
        labels: ["address", "पता", "एड्रेस"]
      - value: "vehicle"
        labels: ["vehicle", "गाड़ी", "व्हीकल"]
      - value: "documents"
        labels: ["documents", "डॉक्यूमेंट", "papers"]
      - value: "all"
        labels: ["all", "सभी", "everything"]
    
    prompts:
      en: "Which verification - Basic Info, Location, Address, Vehicle, Documents, or All?"
      hi: "कौन सा वेरिफिकेशन - बेसिक इन्फो, लोकेशन, एड्रेस, व्हीकल, डॉक्यूमेंट, या सभी?"
      hinglish: "Konsa verification - Basic Info, Location, Address, Vehicle, Documents, ya All?"

  dsk_location:
    type: "text"
    entity: "dsk_location"
    required: false
    
    auto_fill_sources:
      - source: "gps_nearest"
        field: "nearest_dsk"
    
    prompts:
      en: "Which DSK would you like to visit?"
      hi: "किस DSK पर जाना चाहते हैं?"
      hinglish: "Kis DSK par jana chahte hain?"

  ic_location:
    type: "text"
    entity: "ic_location"
    required: false
    
    auto_fill_sources:
      - source: "gps_nearest"
        field: "nearest_ic"
    
    prompts:
      en: "Which Inactivity Center would you like to visit?"
      hi: "किस इनएक्टिविटी सेंटर पर जाना चाहते हैं?"
      hinglish: "Kis IC par jana chahte hain?"

  deactivation_center:
    type: "categorical"
    entity: "deactivation_center"
    
    options:
      - value: "dsk"
        labels: ["DSK", "Driver Seva Kendra", "ड्राइवर सेवा केंद्र"]
      - value: "ic"
        labels: ["IC", "Inactivity Center", "इनएक्टिविटी सेंटर"]
    
    prompts:
      en: "Where would you like to deactivate - DSK or IC?"
      hi: "कहां डीएक्टिवेट करना है - DSK या IC?"
      hinglish: "Kahan deactivate karna hai - DSK ya IC?"

  activation_center:
    type: "categorical"
    entity: "activation_center"
    
    options:
      - value: "dsk"
        labels: ["DSK", "Driver Seva Kendra", "ड्राइवर सेवा केंद्र"]
      - value: "ic"
        labels: ["IC", "Inactivity Center", "इनएक्टिविटी सेंटर"]
    
    prompts:
      en: "Where would you like to activate - DSK or IC?"
      hi: "कहां एक्टिवेट करना है - DSK या IC?"
      hinglish: "Kahan activate karna hai - DSK ya IC?"

  leave_duration:
    type: "temporal"
    entity: "leave_duration"
    
    prompts:
      en: "How long will you be on leave?"
      hi: "कितने समय के लिए छुट्टी पर जा रहे हैं?"
      hinglish: "Kitne time ke liye chutti par ja rahe hain?"

  preferred_date:
    type: "temporal"
    entity: "preferred_date"
    
    prompts:
      en: "Which date would you prefer?"
      hi: "कौन सी तारीख पसंद करेंगे?"
      hinglish: "Kaunsi date pasand karenge?"

  preferred_time:
    type: "temporal"
    entity: "preferred_time"
    
    prompts:
      en: "What time would you prefer?"
      hi: "कौन सा समय पसंद करेंगे?"
      hinglish: "Kaunsa time pasand karenge?"

  leave_start_date:
    type: "temporal"
    entity: "leave_start_date"
    
    prompts:
      en: "When does your leave start?"
      hi: "छुट्टी कब से शुरू होगी?"
      hinglish: "Chutti kab se shuru hogi?"

  leave_end_date:
    type: "temporal"
    entity: "leave_end_date"
    
    prompts:
      en: "When does your leave end?"
      hi: "छुट्टी कब खत्म होगी?"
      hinglish: "Chutti kab khatam hogi?"
